<div class="main">
  <div class="container-fluid">
    <div class="row cust-row">
      <div class="col-12 " style="border-bottom: 1px solid #c8ced3;">
        <div class="p-2" style="display: flex">
          <div style="padding-right: 5px;">
            <i class="fa fa-search"></i>
          </div>
          <span>TÌM KIẾM</span>
        </div>
      </div>
      <div class="col-12" style="margin-top: 10px;margin-bottom: 5px;">
        <div style="width:100%">
          <div class="col-6 colLeft">
            <div class="form-group row">
              <label class="col-sm-4 col-form-label textLabel">Mã CIF
              </label>
              <div class="col-sm-8 ">
                <input type="text" class="form-control form-control-sm inputText" [(ngModel)]="condition.customerCode"
                       placeholder="-- Vui lòng nhập CIF --">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 col-form-label textLabel">Số giấy tờ xác minh
              </label>
              <div class="col-sm-8 ">
                <input type="text" class="form-control form-control-sm inputText" [(ngModel)]="condition.perDocNo"
                placeholder="-- Vui lòng nhập số giấy tờ xác minh --">
              </div>
            </div>
            <div class="form-group row" style="padding-bottom: .2rem">
              <label class="col-sm-4 col-form-label textLabel">Trạng thái
              </label>
              <div class="col-sm-8">
                <select class="form-control form-control-sm" style="height: 36px; padding-bottom: .2rem" [(ngModel)]="condition.statusId">
                  <option value="" selected>-- Tất cả trạng thái --</option>
                  <option *ngFor="let status of processStatusList" [value]="status.id">{{status.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group row" style="padding-bottom: .2rem">
              <label class="col-sm-4 col-form-label textLabel">Chi nhánh
              </label>
              <div class="col-sm-8">
                <select class="form-control form-control-sm" style="height: 36px; padding-bottom: .2rem" [(ngModel)]="condition.branchCode">
                  <option value="" selected>-- Tất cả chi nhánh --</option>
                  <option *ngFor="let branch of branches" [value]="branch.code">{{branch.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 col-form-label textLabel">Ngày tạo</label>
              <div class="col-sm-8 is-invalid">
                <div [ngClass]="{'is-invalid': condition.dateCreatedValidator().valid}">
                  <div style="display: flex; float: left">
                    <input class="form-control form-control-sm inputText" max="{{condition.getToday()}}" min="1900-12-31" [(ngModel)]="condition.inputDateFrom"
                           style="width: 180px; text-align: center; horiz-align: left" (input)="dateValidator()"
                           placeholder="-- Ngày bắt đầu --" onfocus="(this.type='date')">
                  </div>
                  <div style="display: flex; float: right">
<!--                    <label class="col-form-label textLabel" style="padding-right: 5px">Đến ngày</label>-->
                    <input class="form-control form-control-sm inputText" max="{{condition.getToday()}}" min="1900-12-31" [(ngModel)]="condition.inputDateTo"
                           style="width: 180px; text-align: center; horiz-align: right; float: right" (input)="dateValidator()"
                           placeholder="-- Ngày kết thúc --" onfocus="(this.type='date')">
                  </div>
                </div>
                <div class="invalid-feedback" style="display: flex">
                  <div>{{condition.dateCreatedValidator().message}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-6 colRight">
            <div class="form-group row">
              <label class="col-sm-4 col-form-label textLabel">Người tạo
              </label>
              <div class="col-sm-8">
                <ng-select
                   [items]="userList"
                   [addTag]="true"
                   [(ngModel)]="condition.inputter"
                   placeholder="-- Tất cả người dùng --"
                   bindLabel="userName"
                   bindValue="userName">
                  <ng-template ng-notfound-tmp let-searchTerm="searchTerm">
                    <div class="ng-option disabled">
                      Không tìm thấy dữ liệu cho "{{searchTerm}}"
                    </div>
                  </ng-template>
                  <ng-template ng-tag-tmp let-search="searchTerm">
                    <b>Thêm</b>: {{search}}
                  </ng-template>
                </ng-select>
              </div>
            </div>
            <div class="form-group row" style="padding-top: .2rem">
              <label class="col-sm-4 col-form-label textLabel">Tên khách hàng
              </label>
              <div class="col-sm-8 ">
                <input type="text" class="form-control form-control-sm inputText" [(ngModel)]="condition.fullName"
                placeholder="-- Vui lòng nhập tên khách hàng --">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 col-form-label textLabel">Mã hồ sơ
              </label>
              <div class="col-sm-8 ">
                <input type="text" class="form-control form-control-sm inputText" [(ngModel)]="condition.code"
                       placeholder="-- Vui lòng nhập mã hồ sơ --">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 col-form-label textLabel">Loại khách hàng
              </label>
              <div class="col-sm-8">
                <select class="form-control form-control-sm" style="height: 36px;" [(ngModel)]="condition.customerTypeCode">
                  <option value="" selected>-- Tất cả loại khách hàng --</option>
                  <option *ngFor="let type of customerType" [value]="type.id">{{type.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group row" style="padding-top: 3px">
              <label class="col-sm-4 col-form-label textLabel">Loại hồ sơ
              </label>
              <div class="col-sm-8">
                <select class="form-control form-control-sm" style="height: 36px;" [(ngModel)]="condition.regisType">
                  <option value="" selected>-- Tất cả loại hồ sơ --</option>
                  <option *ngFor="let type of regisTypeList" [value]="type.id">{{type.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group row">
              <div class="float-right" style="text-align: right;width: 100%;margin: 10px 15px 5px 0px;">
                <button (click)="search()" type="button" class="btn btn-color" style="width: 150px;color: white;">
                  <i class="fa fa-search" style="color: white"></i>
                  Tìm kiếm
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row cust-row" style="clear: both;margin-top: 5px;">
      <div class="col-12 " style="border-bottom: 1px solid #c8ced3;">
        <div class="p-2">
          <i class="fa fa-list" style="padding-right: 5px"></i>
          <span>DANH SÁCH HỒ SƠ</span>
        </div>
      </div>
      <div class="table-lst mat-elevation-z8">
        <table class="table table-responsive table-fixed">
          <thead>
          <tr class="titleTD">
            <td style="width: 50px; text-align: center; padding: 0">STT</td>
            <td >Mã hồ sơ</td>
            <td>Tên khách hàng</td>
            <td >Ngày tạo</td>
            <td >Người tạo</td>
            <td>Trạng thái</td>
            <td>Loại khách hàng</td>
            <td>Loại hồ sơ</td>
            <td>Chi nhánh</td>
            <td >Hành động</td>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let process of processList; index as i" tabindex="0">
            <td style="width: 50px; padding-left: 0; padding-right: 0" >{{pagination.pager.startIndex + i + 1}}</td>
            <td class="file-name col-xs-6" style="color: #253C97;cursor: pointer; " (click)="detail(process.id)">{{process.code}}</td>
            <td class="file-name col-xs-6">{{process.fullName}}</td>
            <td class="file-name col-xs-6">{{process.getDateCreated()}}</td>
            <td class="file-name col-xs-6">{{process.inputter}}</td>
            <td class="file-name col-xs-6">{{process.statusName}}</td>
            <td class="file-name col-xs-6">{{process.customerTypeName}}</td>
            <td class="file-name col-xs-6">{{process.regisTypeName}}</td>
            <td class="file-name col-xs-6">{{process.branchName}}</td>
            <td class="file-name col-xs-6">
              <div class="example-button-container"
                   style="display: block;text-align: center;font-size: 20px;">
                <i *ngIf="showDelete(process)" class="fa fa-trash-o" title="Xóa hồ sơ" (click)="delete(process)" aria-hidden="true"></i>
              </div>
            </td>
          </tr>
          <tr aria-colspan="9" style="text-align: center; margin-top: 15px"
              *ngIf="processList == null || processList.length == 0">Không tìm thấy dữ liệu</tr>
          </tbody>
        </table>
        <nav aria-label="Page navigation for action list"
             style="padding-bottom: 10px;margin-left: 10px;margin-right: 5px;padding-top: 10px;"
             *ngIf="pagination.pager && pagination.pager.pages && pagination.pager.pages.length">
          <div style="float: left; padding-top: 10px;">
            <span>{{pagination.pager.getStatus()}}</span>
          </div>
          <ul class="pagination justify-content-end">
            <div class="amout-show">
              <span>Số lượng bản ghi/trang</span> &nbsp;
              <select class="form-control numberPage"
                      (change)="changePageSize($event.target.value)">
                <option selected value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
              </select> &nbsp;&nbsp;
            </div>

            <li class="page-item" (click)="setPage(pagination.pager.currentPage - 1)">
              <a class="page-link" href="javascript: void(0)" tabindex="-1">&lt;</a>
            </li>
            <li class="page-item" *ngFor="let page of pagination.pager.pages"
                [ngClass]="{active:pagination.pager.currentPage === page}"
                (click)="setPage(page)">
              <a class="page-link" href="javascript: void(0)">{{page}}</a>
            </li>
            <li class="page-item" (click)="setPage(pagination.pager.currentPage + 1)">

              <a class="page-link" href="javascript: void(0)">&gt;</a>
            </li>

          </ul>
        </nav>
         </div>
      </div>
    </div>
  </div>
